/**
 * ì˜¬ë°”ë¥¸ í˜•íƒœì˜ ì‹í’ˆê³µì „ ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸
 * ì‚¬ìš©ì ìš”ì²­ì— ë§ëŠ” ê¹”ë”í•œ í˜•íƒœë¡œ ë°ì´í„° ìƒì„±
 */

const fs = require('fs');
const path = require('path');

/**
 * 17. ì‹ìœ¡ê°€ê³µí’ˆë¥˜ ë° í¬ì¥ìœ¡ ì„¹ì…˜ì˜ ì˜¬ë°”ë¥¸ ë°ì´í„°
 */
const cleanFoodCodexData = {
  sections: [
    {
      "id": "section-17",
      "title": "17. ì‹ìœ¡ê°€ê³µí’ˆë¥˜ ë° í¬ì¥ìœ¡",
      "content": `17. ì‹ìœ¡ê°€ê³µí’ˆë¥˜ ë° í¬ì¥ìœ¡

  ì‹ìœ¡ê°€ê³µí’ˆë¥˜ ë° í¬ì¥ìœ¡ì´ë¼ í•¨ì€ ã€Œì¶•ì‚°ë¬¼ ìœ„ìƒê´€ë¦¬ë²•ã€ì— ë”°ë¥¸ ì‹ìœ¡ ë˜ëŠ” ì‹ìœ¡ê°€ê³µí’ˆì„ ì£¼ì›ë£Œë¡œ í•˜ì—¬ ê°€ê³µí•œ í–„ë¥˜, ì†Œì‹œì§€ë¥˜, ë² ì´ì»¨ë¥˜, ê±´ì¡°ì €ì¥ìœ¡ë¥˜, ì–‘ë…ìœ¡ë¥˜, ì‹ìœ¡ì¶”ì¶œê°€ê³µí’ˆ, ì‹ìœ¡ê°„í¸ì¡°ë¦¬ì„¸íŠ¸, ì‹ìœ¡í•¨ìœ ê°€ê³µí’ˆ, í¬ì¥ìœ¡ì„ ë§í•œë‹¤.`,
      "category": "ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ",
      "file_source": "manual_clean",
      "character_count": 189,
      "section_number": "17"
    },
    
    {
      "id": "section-17_1",
      "title": "17-1 í–„ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)",
      "content": `17-1 í–„ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)
 1) ì •ì˜
   í–„ë¥˜ë¼ í•¨ì€ ì‹ìœ¡ ë˜ëŠ” ì‹ìœ¡ê°€ê³µí’ˆì„ ë¶€ìœ„ì— ë”°ë¼ ë¶„ë¥˜í•˜ì—¬ ì •í˜• ì—¼ì§€í•œ í›„ ìˆ™ì„±, ê±´ì¡°í•œ ê²ƒ, í›ˆì—°, ê°€ì—´ì²˜ë¦¬í•œ ê²ƒì´ê±°ë‚˜ ì‹ìœ¡ì˜ ê³ ê¹ƒë©ì–´ë¦¬ì— ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•œ í›„ ìˆ™ì„±, ê±´ì¡°í•œ ê²ƒì´ê±°ë‚˜ í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•˜ì—¬ ê°€ê³µí•œ ê²ƒì„ ë§í•œë‹¤.
   
 2) ì›ë£Œ ë“±ì˜ êµ¬ë¹„ìš”ê±´
   (1) ì–´ìœ¡ì„ í˜¼í•©í•˜ì—¬ í”„ë ˆìŠ¤í–„ì„ ì œì¡°í•˜ëŠ” ê²½ìš° ì–´ìœ¡ì€ ì „ì²´ ìœ¡í•¨ëŸ‰ì˜ 10% ë¯¸ë§Œì´ì–´ì•¼ í•œë‹¤.
   
 3) ì œì¡°ï½¥ê°€ê³µê¸°ì¤€
 
 4) ì‹í’ˆìœ í˜•
   (1) í–„âˆ¶ì‹ìœ¡ì„ ë¶€ìœ„ì— ë”°ë¼ ë¶„ë¥˜í•˜ì—¬ ì •í˜• ì—¼ì§€í•œ í›„ ìˆ™ì„±ï½¥ê±´ì¡°í•˜ê±°ë‚˜ í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•˜ì—¬ ê°€ê³µí•œ ê²ƒì„ ë§í•œë‹¤(ë¼ˆë‚˜ ê»ì§ˆì´ ìˆëŠ” ê²ƒë„ í¬í•¨í•œë‹¤).
   (2) ìƒí–„âˆ¶ì‹ìœ¡ì˜ ë¶€ìœ„ë¥¼ ì—¼ì§€í•œ ê²ƒì´ë‚˜ ì´ì— ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•˜ì—¬ ì €ì˜¨ì—ì„œ í›ˆì—° ë˜ëŠ” ìˆ™ì„±ï½¥ê±´ì¡°í•œ ê²ƒì„ ë§í•œë‹¤(ë¼ˆë‚˜ ê»ì§ˆì´ ìˆëŠ” ê²ƒë„ í¬í•¨í•œë‹¤).
   (3) í”„ë ˆìŠ¤í–„âˆ¶ì‹ìœ¡ì˜ ê³ ê¹ƒë©ì–´ë¦¬ë¥¼ ì—¼ì§€í•œ ê²ƒì´ë‚˜ ì´ì— ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•œ í›„ ìˆ™ì„±ï½¥ê±´ì¡°í•˜ê±°ë‚˜ í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•œ ê²ƒìœ¼ë¡œ ìœ¡í•¨ëŸ‰ 75% ì´ìƒ, ì „ë¶„ 8% ì´í•˜ì˜ ê²ƒì„ ë§í•œë‹¤.
   
 5) ê·œê²©
   (1) ì•„ì§ˆì‚° ì´ì˜¨(g/kg)âˆ¶0.07 ë¯¸ë§Œ
   (2) íƒ€ë¥´ìƒ‰ì†Œâˆ¶ê²€ì¶œë˜ì–´ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.
   (3) ë³´ì¡´ë£Œ(g/kg)âˆ¶ë‹¤ìŒì—ì„œ ì •í•˜ëŠ” ì´ì™¸ì˜ ë³´ì¡´ë£Œê°€ ê²€ì¶œë˜ì–´ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.

ì†Œë¸Œì‚°
ì†Œë¸Œì‚°ì¹¼ë¥¨
ì†Œë¸Œì‚°ì¹¼ìŠ˜
2.0 ì´í•˜(ì†Œë¸Œì‚°ìœ¼ë¡œì„œ)

   (4) ì„¸ê· ìˆ˜âˆ¶n=5, c=0, m=0(ë©¸ê· ì œí’ˆì— í•œí•œë‹¤).
   (5) ëŒ€ì¥ê· âˆ¶n=5, c=2, m=10, M=100(ìƒí–„ì— í•œí•œë‹¤)
   (6) ëŒ€ì¥ê· êµ°âˆ¶n=5, c=2, m=10, M=100(ì‚´ê· ì œí’ˆì— í•œí•œë‹¤) 
   (7) ì‚´ëª¨ë„¬ë¼âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   (8) ë¦¬ìŠ¤í…Œë¦¬ì•„ ëª¨ë…¸ì‚¬ì´í† ì œë„¤ìŠ¤âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   (9) í™©ìƒ‰í¬ë„ìƒêµ¬ê· âˆ¶n=5, c=1, m=10, M=100(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤. ë‹¤ë§Œ, ìƒí–„ì˜ ê²½ìš° n=5, c=2, m=10, M=100 ì´ì–´ì•¼ í•œë‹¤)  
   
 6) ì‹œí—˜ë°©ë²•
   ì œ8. ì¼ë°˜ì‹œí—˜ë²•ì— ë”°ë¼ ì‹œí—˜í•œë‹¤.`,
      "category": "ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ",
      "file_source": "manual_clean",
      "character_count": 1234,
      "section_number": "17-1"
    },

    {
      "id": "section-17_2",
      "title": "17-2 ì†Œì‹œì§€ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)",
      "content": `17-2 ì†Œì‹œì§€ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)
 1) ì •ì˜
   ì†Œì‹œì§€ë¥˜ë¼ í•¨ì€ ì‹ìœ¡ì´ë‚˜ ì‹ìœ¡ê°€ê³µí’ˆì„ ê·¸ëŒ€ë¡œ ë˜ëŠ” ì—¼ì§€í•˜ì—¬ ë¶„ì‡„ ì„¸ì ˆí•œ ê²ƒì— ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•œ í›„ í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•œ ê²ƒì´ê±°ë‚˜, ì €ì˜¨ì—ì„œ ë°œíš¨ì‹œì¼œ ìˆ™ì„± ë˜ëŠ” ê±´ì¡°ì²˜ë¦¬í•œ ê²ƒì´ê±°ë‚˜, ë˜ëŠ” ì¼€ì´ì‹±ì— ì¶©ì „í•˜ì—¬ ëƒ‰ì¥ï½¥ëƒ‰ë™í•œ ê²ƒì„ ë§í•œë‹¤.(ìœ¡í•¨ëŸ‰ 70% ì´ìƒ, ì „ë¶„ 10% ì´í•˜ì˜ ê²ƒ).
   
 2) ì›ë£Œ ë“±ì˜ êµ¬ë¹„ìš”ê±´
 
 3) ì œì¡°ï½¥ê°€ê³µê¸°ì¤€
   (1) ê±´ì¡° ì†Œì‹œì§€ë¥˜ëŠ” ìˆ˜ë¶„ì„ 35% ì´í•˜ë¡œ, ë°˜ê±´ì¡° ì†Œì‹œì§€ë¥˜ëŠ” ìˆ˜ë¶„ì„ 55% ì´í•˜ë¡œ ê°€ê³µí•˜ì—¬ì•¼ í•œë‹¤.
   (2) ì‹ìœ¡ì„ ë¶„ì‡„í•˜ì—¬ ì¼€ì´ì‹±ì— ì¶©ì „ í›„ ëƒ‰ì¥ ë˜ëŠ” ëƒ‰ë™í•œ ì œí’ˆì—ëŠ” ì¶©ì „ìš© ë‚´ìš©ë¬¼ì— ë‚´ì¥ì„ ì‚¬ìš©í•˜ì—¬ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.
   
 4) ì‹í’ˆìœ í˜•
   (1) ì†Œì‹œì§€âˆ¶ì‹ìœ¡(ìœ¡í•¨ëŸ‰ ì¤‘ 10% ë¯¸ë§Œì˜ ì•Œë¥˜ë¥¼ í˜¼í•©í•œ ê²ƒë„ í¬í•¨)ì— ë‹¤ë¥¸ ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•œ í›„ ìˆ™ì„±ï½¥ê±´ì¡°ì‹œí‚¨ ê²ƒ, í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•œ ê²ƒ ë˜ëŠ” ì¼€ì´ì‹±ì— ì¶©ì „ í›„ ëƒ‰ì¥ï½¥ëƒ‰ë™í•œ ê²ƒì„ ë§í•œë‹¤.
   (2) ë°œíš¨ì†Œì‹œì§€âˆ¶ì‹ìœ¡ì— ë‹¤ë¥¸ ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•˜ì—¬ ì €ì˜¨ì—ì„œ í›ˆì—° ë˜ëŠ” í›ˆì—°í•˜ì§€ ì•Šê³  ë°œíš¨ì‹œì¼œ ìˆ™ì„± ë˜ëŠ” ê±´ì¡°ì²˜ë¦¬í•œ ê²ƒì„ ë§í•œë‹¤.
   (3) í˜¼í•©ì†Œì‹œì§€âˆ¶ì‹ìœ¡(ì „ì²´ ìœ¡í•¨ëŸ‰ ì¤‘ 20% ë¯¸ë§Œì˜ ì–´ìœ¡ ë˜ëŠ” ì•Œë¥˜ë¥¼ í˜¼í•©í•œ ê²ƒë„ í¬í•¨)ì— ë‹¤ë¥¸ ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•œ í›„ ìˆ™ì„±ï½¥ê±´ì¡°ì‹œí‚¨ ê²ƒ, í›ˆì—° ë˜ëŠ” ê°€ì—´ì²˜ë¦¬í•œ ê²ƒì„ ë§í•œë‹¤.
   
 5) ê·œê²©
   (1) ì•„ì§ˆì‚° ì´ì˜¨(g/kg)âˆ¶0.07 ë¯¸ë§Œ
   (2) ë³´ì¡´ë£Œ(g/kg)âˆ¶ë‹¤ìŒì—ì„œ ì •í•˜ëŠ” ì´ì™¸ì˜ ë³´ì¡´ë£Œê°€ ê²€ì¶œë˜ì–´ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.

ì†Œë¸Œì‚°
ì†Œë¸Œì‚°ì¹¼ë¥¨
ì†Œë¸Œì‚°ì¹¼ìŠ˜
2.0 ì´í•˜(ì†Œë¸Œì‚°ìœ¼ë¡œì„œ)

   (3) ì„¸ê· ìˆ˜âˆ¶n=5, c=0, m=0(ë©¸ê· ì œí’ˆì— í•œí•œë‹¤).
   (4) ëŒ€ì¥ê· âˆ¶n=5, c=2, m=10, M=100(ë°œíš¨ì†Œì‹œì§€ì— í•œí•œë‹¤)
   (5) ëŒ€ì¥ê· êµ°âˆ¶n=5, c=2, m=10, M=100(ì‚´ê· ì œí’ˆì— í•œí•œë‹¤)
   (6) ì¥ì¶œí˜ˆì„± ëŒ€ì¥ê· âˆ¶n=5, c=0, m=0/25 g(ì‹ìœ¡ì„ ë¶„ì‡„í•˜ì—¬ ì¼€ì´ì‹±ì— ì¶©ì „ í›„ ëƒ‰ì¥ï½¥ëƒ‰ë™í•œ ì œí’ˆì— í•œí•œë‹¤).
   (7) ì‚´ëª¨ë„¬ë¼âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   (8) ë¦¬ìŠ¤í…Œë¦¬ì•„ ëª¨ë…¸ì‚¬ì´í† ì œë„¤ìŠ¤âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   (9) í™©ìƒ‰í¬ë„ìƒêµ¬ê· âˆ¶n=5, c=1, m=10, M=100(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤. ë‹¤ë§Œ, ë°œíš¨ì†Œì‹œì§€ì˜ ê²½ìš° n=5, c=2, m=10, M=100 ì´ì–´ì•¼ í•œë‹¤)
   
 6) ì‹œí—˜ë°©ë²•
   ì œ8. ì¼ë°˜ì‹œí—˜ë²•ì— ë”°ë¼ ì‹œí—˜í•œë‹¤.`,
      "category": "ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ",
      "file_source": "manual_clean",
      "character_count": 1456,
      "section_number": "17-2"
    },

    {
      "id": "section-17_3", 
      "title": "17-3 ë² ì´ì»¨ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)",
      "content": `17-3 ë² ì´ì»¨ë¥˜(*ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ)
 1) ì •ì˜
   ë² ì´ì»¨ë¥˜ë¼ í•¨ì€ ë¼ì§€ì˜ ë³µë¶€ìœ¡(ì‚¼ê²¹ì‚´) ë˜ëŠ” íŠ¹ì •ë¶€ìœ„ìœ¡(ë“±ì‹¬ìœ¡, ì–´ê¹¨ë¶€ìœ„ìœ¡)ì„ ì •í˜•í•œ ê²ƒì„ ì—¼ì§€í•œ í›„ ê·¸ëŒ€ë¡œ ë˜ëŠ” ì‹í’ˆ ë˜ëŠ” ì‹í’ˆì²¨ê°€ë¬¼ì„ ê°€í•˜ì—¬ í›ˆì—°í•˜ê±°ë‚˜ ê°€ì—´ì²˜ë¦¬í•œ ê²ƒì„ ë§í•œë‹¤.
   
 2) ì›ë£Œ ë“±ì˜ êµ¬ë¹„ìš”ê±´
 3) ì œì¡°ï½¥ê°€ê³µê¸°ì¤€
 4) ì‹í’ˆìœ í˜•
 
 5) ê·œê²©
   (1) ì•„ì§ˆì‚° ì´ì˜¨(g/kg)âˆ¶0.07 ë¯¸ë§Œ
   (2) íƒ€ë¥´ìƒ‰ì†Œâˆ¶ê²€ì¶œë˜ì–´ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.
   (3) ë³´ì¡´ë£Œ(g/kg)âˆ¶ë‹¤ìŒì—ì„œ ì •í•˜ëŠ” ì´ì™¸ì˜ ë³´ì¡´ë£Œê°€ ê²€ì¶œë˜ì–´ì„œëŠ” ì•„ë‹ˆ ëœë‹¤.

ì†Œë¸Œì‚°
ì†Œë¸Œì‚°ì¹¼ë¥¨
ì†Œë¸Œì‚°ì¹¼ìŠ˜
2.0 ì´í•˜(ì†Œë¸Œì‚°ìœ¼ë¡œì„œ)

   (4) ì„¸ê· ìˆ˜âˆ¶n=5, c=0, m=0(ë©¸ê· ì œí’ˆì— í•œí•œë‹¤).
   (5) ëŒ€ì¥ê· êµ°âˆ¶n=5, c=2, m=10, M=100(ì‚´ê· ì œí’ˆì— í•œí•œë‹¤)
   (6) ì‚´ëª¨ë„¬ë¼âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   (7) ë¦¬ìŠ¤í…Œë¦¬ì•„ ëª¨ë…¸ì‚¬ì´í† ì œë„¤ìŠ¤âˆ¶n=5, c=0, m=0/25g(ì‚´ê· ì œí’ˆ ë˜ëŠ” ê·¸ëŒ€ë¡œ ì„­ì·¨í•˜ëŠ” ì œí’ˆì— í•œí•œë‹¤)
   
 6) ì‹œí—˜ë°©ë²•
   ì œ8. ì¼ë°˜ì‹œí—˜ë²•ì— ë”°ë¼ ì‹œí—˜í•œë‹¤.`,
      "category": "ì¶•ì‚°ë¬¼ê°€ê³µí’ˆ", 
      "file_source": "manual_clean",
      "character_count": 745,
      "section_number": "17-3"
    }
  ]
};

/**
 * ë©”ì¸ í•¨ìˆ˜
 */
async function createCleanData() {
  try {
    console.log('ğŸ› ï¸  ê¹”ë”í•œ ì‹í’ˆê³µì „ ë°ì´í„° ìƒì„± ì¤‘...');
    
    // 1. ë°ì´í„° ì €ì¥
    const outputPath = path.join(__dirname, '../data/processed/food_codex_sections_clean.json');
    fs.writeFileSync(outputPath, JSON.stringify(cleanFoodCodexData, null, 2), 'utf-8');
    
    console.log(`ğŸ’¾ ì •ë¦¬ëœ ë°ì´í„° ì €ì¥ ì™„ë£Œ: ${outputPath}`);
    console.log(`ğŸ“Š ì´ ${cleanFoodCodexData.sections.length}ê°œ ì„¹ì…˜ ìƒì„±`);
    
    // 2. ìƒ˜í”Œ ì¶œë ¥
    console.log('\nğŸ“‹ ìƒì„±ëœ ë°ì´í„° ìƒ˜í”Œ:');
    console.log('='.repeat(60));
    
    const sampleSection = cleanFoodCodexData.sections.find(s => s.id === 'section-17_2');
    if (sampleSection) {
      console.log(`ì œëª©: ${sampleSection.title}`);
      console.log('ë‚´ìš© (ì²˜ìŒ 300ì):');
      console.log(sampleSection.content.substring(0, 300) + '...');
    }
    
    console.log('='.repeat(60));
    console.log('âœ… ê¹”ë”í•œ ë°ì´í„° ìƒì„± ì™„ë£Œ!');
    console.log('ğŸ“ ì´ì œ ì´ ë°ì´í„°ë¥¼ Supabaseì— ì—…ë¡œë“œí•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.');
    
  } catch (error) {
    console.error('âŒ ì˜¤ë¥˜ ë°œìƒ:', error);
    process.exit(1);
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
if (require.main === module) {
  createCleanData();
}

module.exports = { cleanFoodCodexData };